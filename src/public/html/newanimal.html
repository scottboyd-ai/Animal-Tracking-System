<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
</head>
<body>
<form action="/animals/new" method="post">
    <table>
        <tr>
            <td>
                <label>Animal Name:</label>
            </td>
            <td>
                <input type="text" name="animalName"/>
            </td>
        </tr>
        <tr>
            <td>
                <label>Species:</label>
            </td>
            <td>
                <input type="text" name="species"/>
            </td>
        </tr>
        <tr>
            <td>
                <label>Date of Birth:</label>
            </td>
            <td>
                <input type="date" name="dob">
            </td>
        </tr>
        <tr>
            <td>
                <label>Weight:</label>
            </td>
            <td>
                <input type="number" name="weight">
            </td>
            <td>
                <select name="weightUnit">
                    {{{weightUnitOptions}}}
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <label>Animal Location:</label>

            </td>
            <td>
                <select name="animalLocation">
                    {{{animalLocationOptions}}}
                </select>
            </td>
            <td>
                <input type="button" id="newLocationButton" onclick="newLocation()" value="Add New Location">
                <input type="hidden" id="newLocationVal" name="newLocationVal">
            </td>
        </tr>
        <tr id="newLocation">
            <td>
                <label>Location Name:</label>
            </td>
            <td>
                <input id="locationName" name="locationName"/>
            </td>
        </tr>
        <tr>
            <td>
                <label>Enclosure:</label>
            </td>
            <td>
                <select name="enclosure">
                    {{{enclosureOptions}}}
                </select>
            </td>
            <td>
                <input type="button" id="newEnclosureButton" onclick="newEnclosure()" value="Add New Enclosure">
                <input type="hidden" id="newEnclosureVal" name="newEnclosureVal">
            </td>
        </tr>
        <tr class="newEnclosure">
            <td>
                <label>Enclosure Name:</label>
            </td>
            <td>
                <input id="enclosureName" name="enclosureName">
            </td>
        </tr>
        <tr class="newEnclosure">
            <td>
                <label>Enclosure Dimensions:</label>
            </td>
            <td>
                <input id="dimensions" name="dimensions">
            </td>
        </tr>
        <tr class="newEnclosure">
            <td>
                <label>Enclosure Last Cleaned:</label>
            </td>
            <td>
                <input id="enclosureLastCleaned" name="enclosureLastCleaned" type="datetime-local">
            </td>
        </tr>
        <tr class="newEnclosure">
            <td>
                <label>Notes on Enclosure:</label>
            </td>
            <td>
                <input id="enclosureNotes" name="enclosureNotes">
            </td>
        </tr>
        <tr>
            <td>
                <label>Medical Records:</label>
            </td>
            <td>
                <input type="button" onclick="importMedicalRecords()" value="Import Medical Records">
            </td>
        </tr>
        <tr>
            <td>
                <label>Feeding Instructions:</label>
            </td>
            <td>
                <input name="feedingInstructions">
            </td>
        </tr>
        <tr>
            <td>
                <label>Feeding Notes:</label>
            </td>
            <td>
                <input name="feedingNotes">
            </td>
        </tr>
    </table>
    <div>
        <button type="submit">Submit</button>
    </div>
</form>
</body>
{{{standardImports}}}

<script>
    let enclosureShow = false;
    const newEnclosureElement = $('.newEnclosure');
    let locationShow = false;
    const newLocationElement = $('#newLocation');

    $(function () {
        newEnclosureElement.hide();
        newLocationElement.hide();
    });

    function newEnclosure() {
        if (enclosureShow) {
            newEnclosureElement.hide();
            $('#newEnclosureButton').val('Add New Enclosure');
            clearEnclosureFields();
            enclosureShow = false;
        } else {
            newEnclosureElement.show();
            $('#newEnclosureButton').val('Nevermind');
            enclosureShow = true;
        }
        $('#newEnclosureVal').val(enclosureShow.toString());
    }

    function clearEnclosureFields() {
        $('#enclosureName').val('');
        $('#dimensions').val('');
        $('#enclosureLastCleaned').val('');
        $('#enclosureNotes').val('');
    }

    function newLocation() {
        if (locationShow) {
            newLocationElement.hide();
            $('#newLocationButton').val('Add New Location');
            clearLocationFields();
            locationShow = false;
        } else {
            newLocationElement.show();
            $('#newLocationButton').val('Nevermind');
            locationShow = true;
        }
        $('#newLocationVal').val(locationShow.toString());
    }

    function clearLocationFields() {
        $('#locationName').val('');
    }

    function importMedicalRecords() {
        alert('Pay the devs more to get this feature!');
    }
</script>
</html>