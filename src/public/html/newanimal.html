<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
</head>
<body>
<form action="/animals/new" method="post">
    <div>
        <label>Animal Name:
            <input type="text" name="animalName"/>
        </label>
    </div>
    <div>
        <label>Species:
            <input type="text" name="species"/>
        </label>
    </div>
    <div>
        <label>Age:
            <input type="number" name="age">
            <select name="ageUnit">
                {{{ageUnitOptions}}}
            </select>
        </label>
    </div>
    <div>
        <label>Weight:
            <input type="number" name="weight">
            <select name="weightUnit">
                {{{weightUnitOptions}}}
            </select>
        </label>
    </div>
    <div>
        <label>Animal Location
            <select name="animalLocation">
                {{{animalLocationOptions}}}
            </select>
        </label>
        <input type="button" id="newLocationButton" onclick="newLocation()" value="Add New Location">
        <input type="hidden" id="newLocationVal" name="newLocationVal">
    </div>
    <div id="newLocation">
        <label>Location Name:
            <input id="locationName" name="locationName"/>
        </label>
    </div>
    <div>
        <label>Enclosure:
            <select name="enclosure">
                {{{enclosureOptions}}}
            </select>
        </label>
        <input type="button" id="newEnclosureButton" onclick="newEnclosure()" value="Add New Enclosure">
        <input type="hidden" id="newEnclosureVal" name="newEnclosureVal">
        <div id="newEnclosure">
            <div>
                <label>Enclosure Name:
                    <input id="enclosureName" name="enclosureName">
                </label>
            </div>
            <div>
                <label>Enclosure Dimensions:
                    <input id="dimensions" name="dimensions">
                </label>
            </div>
            <div>
                <label>Enclosure Last Cleaned:
                    <input id="enclosureLastCleaned" name="enclosureLastCleaned" type="datetime-local">
                </label>
            </div>
            <div>
                <label>Notes on Enclosure:
                    <input id="enclosureNotes" name="enclosureNotes">
                </label>
            </div>
        </div>
    </div>
    <div>
        <label>Medical Records:
            <input type="button" onclick="importMedicalRecords()" value="Import Medical Records">
        </label>
    </div>
    <div>
        <label>Feeding Instructions:
            <input name="feedingInstructions">
        </label>
    </div>
    <div>
        <label>Feeding Notes:
            <input name="feedingNotes">
        </label>
    </div>
    <div>
        <button type="submit">Submit</button>
    </div>
</form>
</body>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>


<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<style>
    body {
        padding-left: 20px;
        padding-top: 10px;
    }
</style>

<script>
    let enclosureShow = false;
    const newEnclosureElement = $('#newEnclosure');
    let locationShow = false;
    const newLocationElement = $('#newLocation');

    $(function () {
        newEnclosureElement.hide();
        newLocationElement.hide();
    });

    function newEnclosure(){
        if(enclosureShow){
            newEnclosureElement.hide();
            $('#newEnclosureButton').val('Add New Enclosure');
            clearEnclosureFields();
            enclosureShow = false;
        } else{
            newEnclosureElement.show();
            $('#newEnclosureButton').val('Nevermind');
            enclosureShow = true;
        }
        $('#newEnclosureVal').val(enclosureShow.toString());
    }

    function clearEnclosureFields(){
        $('#enclosureName').val('');
        $('#dimensions').val('');
        $('#enclosureLastCleaned').val('');
        $('#enclosureNotes').val('');
    }

    function newLocation(){
        if(locationShow){
            newLocationElement.hide();
            $('#newLocationButton').val('Add New Location');
            clearLocationFields();
            locationShow = false;
        } else{
            newLocationElement.show();
            $('#newLocationButton').val('Nevermind');
            locationShow = true;
        }
        $('#newLocationVal').val(locationShow.toString());
    }

    function clearLocationFields(){
        $('#locationName').val('');
    }

    function importMedicalRecords(){
        alert('Pay the devs more to get this feature!');
    }
</script>
</html>